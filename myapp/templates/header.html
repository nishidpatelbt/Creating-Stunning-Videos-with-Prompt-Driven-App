{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <style type="text/css">
  #progressBar {
    width: 94%;
    height: 30px;
    {% comment %} margin: 20px; {% endcomment %}
    position: absolute;
    bottom: 0;
    left: 23px;
    }

  .fat-progress-bar {
    height: 20%;
    background: linear-gradient(to right, #4CAF50, #2196F3); /* Change gradient colors as needed */
    border-radius: 7px; /* Adjust the border-radius for a fat appearance */
    position: absolute;
    top: 0;
    left: 0;
    }

  #progressText {
    position: absolute;
    top: -15px;
    left: 20px;
    transform: translate(-50%, -50%);
    color: #fff;
    }
   .popup {
   display: none;
   position: fixed;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   background: rgba(0, 0, 0, 0.5);
   }
   .popup-content {
   background: #fff;
   max-width: 80%;
   margin: 20vh auto;
   padding: 20px;
   border-radius: 8px;
   text-align: center;
   }
   .loader-main {
   width: 240px;
   padding: 0 20px;
   position: fixed;
   top: 50%;
   left: 50%;
   transform: translate(-50%, -50%);
   display: flex;
   align-items: center;
   gap: 20px;
   }
   .loader-container {
   {% comment %} width: 100%; {% endcomment %}
   padding: 0 20px;
   position: fixed;
   top: 50%;
   left: 50%;
   transform: translate(-50%, -50%);
   align-items: center;
   gap: 20px;
   }
   .loader-container .loader-text {
   color: #ffffff;
   }
   .loader {
   display: none;
   animation: rotate 1s infinite;
   height: 50px;
   width: 50px;
   }
   .loader:before,
   .loader:after {
   border-radius: 50%;
   content: '';
   display: block;
   height: 20px;
   width: 20px;
   }
   .loader:before {
   animation: ball1 1s infinite;
   background-color: #cb2025;
   box-shadow: 30px 0 0 #f8b334;
   margin-bottom: 10px;
   }
   .loader:after {
   animation: ball2 1s infinite;
   background-color: #00a096;
   box-shadow: 30px 0 0 #97bf0d;
   }
   @keyframes rotate {
   0% {
   -webkit-transform: rotate(0deg) scale(0.8);
   -moz-transform: rotate(0deg) scale(0.8);
   }
   50% {
   -webkit-transform: rotate(360deg) scale(1.2);
   -moz-transform: rotate(360deg) scale(1.2);
   }
   100% {
   -webkit-transform: rotate(720deg) scale(0.8);
   -moz-transform: rotate(720deg) scale(0.8);
   }
   }
   @keyframes ball1 {
   0% {
   box-shadow: 30px 0 0 #f8b334;
   }
   50% {
   box-shadow: 0 0 0 #f8b334;
   margin-bottom: 0;
   -webkit-transform: translate(15px, 15px);
   -moz-transform: translate(15px, 15px);
   }
   100% {
   box-shadow: 30px 0 0 #f8b334;
   margin-bottom: 10px;
   }
   }
   @keyframes ball2 {
   0% {
   box-shadow: 30px 0 0 #97bf0d;
   }
   50% {
   box-shadow: 0 0 0 #97bf0d;
   margin-top: -20px;
   -webkit-transform: translate(15px, 15px);
   -moz-transform: translate(15px, 15px);
   }
   100% {
   box-shadow: 30px 0 0 #97bf0d;
   margin-top: 0;
   }
   }
   #videoSlider {
   width: 80%;
   margin: 0 auto;
   }
   #videoSlider video {
   width: 100%;
   height: auto;
   }
   .slick-dots {
   list-style: none;
   display: flex;
   justify-content: center;
   margin: 20px 0;
   padding: 0;
   }
   .slick-dots li {
   margin: 0 5px;
   }
   .slick-dots li button {
   font-size: 10px;
   line-height: 15px;
   border-radius: 50%;
   width: 15px;
   height: 15px;
   border: 1px solid #ccc;
   background-color: #fff;
   cursor: pointer;
   outline: none;
   }
   .segment-texts-main .segment-text h3,
   p {
   color: black;
   }
   .slick-dots li.slick-active button {
   background-color: #000;
   color: #fff;
   }
   .sidebar-container {
   position: fixed;
   top: 75px;
   left: -300px;  /*Start off-screen to the left*/
   width: 280px;
   height: 100%;
   background-color: #1c1c1c;
   overflow-x: hidden;
   transition: 0.5s; /*Add a smooth transition*/ 
   }
   .sidebar-container .user-history {
   padding: 15px;
   border-bottom: 1px solid black;
   }
   .sidebar-container.active {
   left: 0;
   height: 100%;
   z-index: 9999;
   }
   .sidebar-container .user-history h3 {
   font-family: Inter, sans-serif;
   color: rgb(141, 141, 141);
   font-size: 16px;
   font-weight: 600;
   line-height: 24px;
   }
   .sidebar-container .user-history ul {
   padding-left: 1rem;
   margin: 0;
   }
   .sidebar-container .user-history ul li {
   list-style-type: none;
   display: flex;
   align-items: center;
   column-gap: 9.5px;
   }
   .sidebar-container .user-history ul li a {
   white-space: nowrap;
   overflow: hidden;
   padding-block: 6px;
   font-weight: 500;
   font-size: 12px;
   line-height: 21px;
   color: #808080;
   font-family: Inter, sans-serif;
   }
   .form-floating {
   background-color: #2C2C2C;
   border: none;
   border-radius: 5px;
   }
   .form-floating textarea {
   background-color: #2C2C2C;
   border: none;
   }
   form .btn-primary {
   letter-spacing: 0px;
   font-weight: 600;
   font-size: 14px;
   line-height: 26px;
   white-space: nowrap;
   user-select: none;
   border-radius: 4px;
   }
   .c-PJLV.c-gFjEVZ, .c-lbbfNW.c-cEifbC{
   margin: 0; font-weight: 500;font-size: 12px; line-height: 21px; color: #808080;
   }
   .c-PJLV.c-gFjEVZ:hover {
   background: #363636;
   }
</style>
    <meta charset="utf-8">
    <title>AI.Tech - Artificial Intelligence HTML Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Ubuntu:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="{% static 'lib/animate/animate.min.css' %}" rel="stylesheet">
    <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">

    <!-- Add the Slick CSS files -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flickity@3.0.0/css/flickity.min.css">
</head>

<body style="background-color: #141414;">

    <!-- Navbar Start -->
    <div class="container-fluid sticky-top">
        <div class="container" style="max-width: 1280px;">
            <nav class="navbar navbar-expand-lg navbar-dark p-0">
                <a href="#" class="nav-item nav-link active history-sidebar"><svg width="17px" height="13px" viewBox="0 0 17 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 0.5C0 0.223858 0.223858 0 0.5 0H16.5C16.7761 0 17 0.223858 17 0.5C17 0.776142 16.7761 1 16.5 1H0.5C0.223858 1 0 0.776142 0 0.5ZM0 6.5C0 6.22386 0.223858 6 0.5 6H16.5C16.7761 6 17 6.22386 17 6.5C17 6.77614 16.7761 7 16.5 7H0.5C0.223858 7 0 6.77614 0 6.5ZM0.5 12C0.223858 12 0 12.2239 0 12.5C0 12.7761 0.223858 13 0.5 13H16.5C16.7761 13 17 12.7761 17 12.5C17 12.2239 16.7761 12 16.5 12H0.5Z" fill="white"></path></svg></a>
                <a href="{% url 'index' %}" class="navbar-brand">
                    <h1 class="text-dark">AI<span class="text-dark">.</span>Video</h1>
                </a>
                <button type="button" class="navbar-toggler ms-auto me-0" data-bs-toggle="collapse"
                    data-bs-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                  <div class="navbar-nav ms-auto">
                      <a href="{% url 'index' %}" class="nav-item nav-link active">Home</a>
                      {% if request.session.email %}
                          <a href="{% url 'logout' %}" class="nav-item nav-link active">LogOut</a>
                          <a href="{% url 'work_space' pk=1 %}" class="nav-item nav-link active">Create New</a>
                          {% for workspace in WorkSpace %}
                              <a href="{% url 'work_space' pk=workspace.pk %}" class="nav-item nav-link active">WorkSpace</a>
                          {% endfor %}
                      {% else %}
                          <a href="{% url 'login' %}" class="nav-item nav-link active">LogIn</a>
                          <a href="{% url 'signup' %}" class="nav-item nav-link active login-btn">SignUp</a>
                      {% endif %}
                  </div> 
              </div>
            </nav>
        </div>
    </div>
    <!-- Navbar End -->

    <!-- Full Screen Search Start -->
    <div class="modal fade" id="searchModal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content" style="background: rgba(20, 24, 62, 0.7);">
                <div class="modal-header border-0">
                    <button type="button" class="btn btn-square bg-white btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex align-items-center justify-content-center">
                    <div class="input-group" style="max-width: 600px;">
                        <input type="text" class="form-control bg-transparent border-light p-3"
                            placeholder="Type search keyword">
                        <button class="btn btn-light px-4"><i class="bi bi-search"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Full Screen Search End -->

    {% block content %}

    <div class="container-fluid py-5">
   <div class="container py-5">
      <div class="loader-container">
         <div class="loader-main">
            <div id="loader" class="loader"></div>
            <div id="loader-text" class="loader-text"></div>
         </div>
         <div id="progressBar" style="display: none;">
            <div id="progress" class="fat-progress-bar"></div>
            <div id="progressText">0%</div>
         </div>
         <div class="background-video" style="display: none;">
            <video id="background-myVideo"  width="100%" height="360" loop>
               <source src="{% static 'video/bg-video.mp4' %}" type="video/mp4">
            </video>
         </div>
      </div>
      <div class="mx-auto wow fadeIn input-txt-to-create-vid maxima-sub-head" data-wow-delay="0.1s" style="max-width: 641px; display: flex;
         justify-content: space-between;">
         <div class="login-heading">Work-Space</div>
         <select name="cars" id="cars" style="width: 40%; padding: 7px 14px; border-radius: 3px;     background-color: #363636; border: none; font-weight: 500; font-size: 12px; line-height: 21px; color: #f3eeee; outline: none;">
            <option value="volvo" style="padding: 8px 10px 8px 12px; color: var(--colors-body-text); cursor: pointer; outline: none;">Select Workflow</option>
            <option value="shorts" style="padding: 8px 10px 8px 12px; color: var(--colors-body-text); cursor: pointer; outline: none;">Youtube shorts</option>
            <option value="explainer" style="padding: 8px 10px 8px 12px; color: var(--colors-body-text); cursor: pointer; outline: none;">Youtube explainer</option>
            <option value="events" style="padding: 8px 10px 8px 12px; color: var(--colors-body-text); cursor: pointer; outline: none;">Recent events video</option>
            <option value="Video" style="padding: 8px 10px 8px 12px; color: var(--colors-body-text); cursor: pointer; outline: none;">Script to Video</option>
         </select>
         <button type="button" class="navbar-toggler ms-auto me-0" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" style="display: none;">
         <span class="navbar-toggler-icon"></span>
         </button>
      </div>
      <div class="row justify-content-center">
         <div class="col-lg-7">
            <div class="wow fadeIn" data-wow-delay="0.3s">
               {% if msg %}
               <p style="color: green;">{{msg}}</p>
               {% elif msg1 %}
               <p style="color: red;">{{msg1}}</p>
               {% else %}
               <p style="color: red;"></p>
               {% endif %}
               <form method="post" action="{% url 'work_space' pk=user.pk %}" enctype="multipart/form-data">
                  {% csrf_token %}
                  <!-- Your form fields go here -->
                  {% if not merged_audio_and_video_path %}
                  <div class="col-12 input-txt-to-create-vid">
                     <div class="form-floating">
                        <textarea class="form-control" placeholder="Leave a text here" name="message" id="message" style="height: 95px"></textarea>
                        <label for="message">Give Me A Text...</label>
                     </div>
                  </div>
                  <div class="col-12 input-txt-to-create-vid" style="margin-top: 15PX; text-align: right;">
                     <button class="btn btn-primary btn-to-mrg-vid" type="submit">Generate Video</button>   
                  </div>
                  <div class="c-PJLV c-cuMWso try-this" style="background-color: #1C1C1C; width: 100%; max-width: 470px; border-radius: 6px; padding: 20px 10px; margin: 20px auto 0 auto;">
                     <div class="c-PJLV c-kqvkfk" style="display: flex; justify-content: center; margin-bottom: 20px;">
                        <p class="c-lbbfNW c-cEifbC" style="font-weight: 500; font-size: 12px; line-height: 21px; color: #808080;">Try these</p>
                     </div>
                     <div class="c-PJLV c-eOsLIL" style="display: flex; flex-direction: column; gap: 20px; margin-bottom: 20px;">
                        <div class="c-PJLV c-fkxbHL" style="display: flex; justify-content: center; gap: 30px; margin: 0 20px;">
                           <div class="c-PJLV c-gFjEVZ" style="display: flex; justify-content: center; border: 1px solid hsl(0, 0%, 20%); border-radius: 5px;padding: 8px 10px; cursor: pointer;">
                              <p class="c-lbbfNW c-cEifbC">Youtube explainer</p>
                           </div>
                           <div class="c-PJLV c-gFjEVZ" style="display: flex; justify-content: center; border: 1px solid hsl(0, 0%, 20%); border-radius: 5px;padding: 8px 10px; cursor: pointer;>
                              <p class="c-lbbfNW c-cEifbC">Youtube shorts</p>
                           </div>
                        </div>
                        <div class="c-PJLV c-fkxbHL" style="display: flex; justify-content: center;">
                           <div class="c-PJLV c-gFjEVZ" style="display: flex; justify-content: center; border: 1px solid hsl(0, 0%, 20%); border-radius: 5px;padding: 8px 10px; cursor: pointer;>
                              <p class="c-lbbfNW c-cEifbC">Recent events video</p>
                           </div>
                        </div>
                     </div>
                     <div class="c-PJLV c-jOtZaP" style="display: flex; justify-content: center;">
                        <p class="c-lbbfNW c-cEifbC c-lbbfNW-igWBmlJ-css" style="display: flex; align-items: center; gap: 10px;">
                           Watch tutorial
                           <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="c-fOWMyd">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.9972 5.66871C11.2521 5.81595 11.2521 6.18395 10.9972 6.33118L2.25347 11.3807C1.99848 11.5279 1.67969 11.3439 1.67969 11.0494L1.67969 0.950455C1.67969 0.656 1.99846 0.471952 2.25348 0.619221L10.9972 5.66871ZM10.071 5.99995L2.42969 1.58707L2.42969 10.4128L10.071 5.99995Z" fill="#9E9E9E"></path>
                           </svg>
                        </p>
                     </div>
                  </div>
                  {% endif %}
                  {% comment %} {% if work_space_entry %}
                  <div class="mt-3 input-txt-to-create-vid">
                     <h4>WorkSpace Entry Information:</h4>
                     <p>User: {{ work_space_entry.user.name }}</p>
                     <p>Message: {{ work_space_entry.message }}</p>
                     <p>Generated Text: {{ work_space_entry.generated_text }}</p>
                     <!-- <p>Video URL: <a href="{{ work_space_entry.video_url }}" target="_blank">{{ work_space_entry.video_url }}</a></p> -->
                     <p>Date Created: {{ work_space_entry.created_at }}</p>
                     <!-- Add any other fields you want to display -->
                  </div>
                  {% endif %} {% endcomment %}
                  {% if merged_audio_and_video_path %}
                  <h3>Merged Video:</h3>
                  <video width="640" height="360" controls>
                     <source src="{{ merged_audio_and_video_path|safe }}" type="video/mp4">
                     Your browser does not support the video tag.
                  </video>
                  {% endif %} 
               </form>
               <div class="sidebar-container">
                  <div class='user-history'>
                     {% if user_work_space_entries %}
                     <h3>User's WorkSpace History</h3>
                     <ul>
                        {% for entry in user_work_space_entries %}
                        <li>
                           <svg width="16" height="16" viewBox="0 0 18 19" fill="#FFFFFF" xmlns="http://www.w3.org/2000/svg" fill-opacity="0.5" style="height: 16px; width: 16px;">
                              <path d="M8.20312 5.26172C8.42965 5.26172 8.61328 5.44535 8.61328 5.67188V9.63672H11.4844C11.7109 9.63672 11.8945 9.82035 11.8945 10.0469C11.8945 10.2734 11.7109 10.457 11.4844 10.457H8.20312C7.9766 10.457 7.79297 10.2734 7.79297 10.0469V5.67188C7.79297 5.44535 7.9766 5.26172 8.20312 5.26172Z" fill="white"></path>
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M1.23047 9.5C1.23047 5.34708 4.59708 1.98047 8.75 1.98047C12.9029 1.98047 16.2695 5.34708 16.2695 9.5C16.2695 13.6529 12.9029 17.0195 8.75 17.0195C4.59708 17.0195 1.23047 13.6529 1.23047 9.5ZM8.75 2.80078C5.05012 2.80078 2.05078 5.80012 2.05078 9.5C2.05078 13.1999 5.05012 16.1992 8.75 16.1992C12.4499 16.1992 15.4492 13.1999 15.4492 9.5C15.4492 5.80012 12.4499 2.80078 8.75 2.80078Z" fill="white"></path>
                           </svg>
                           <a href="{{ entry.video_url }}" target="_blank">{{ entry.message }}</a>
                        </li>
                        {% endfor %}
                     </ul>
                     {% endif %}
                  </div>
               </div>
               {% if merged_audio_and_video_path %}
               <button id="editButton">Edit</button>
               <div id="editPopup" class="popup">
                  <div class="popup-content">
                     <h2>Edit Video</h2>
                     <button id="closePopup">Close</button>
                     <button id="segment-button-text">segment-texts</button>
                     <button id="segment-button-video">segment-videos</button>
                     <div class="segment-texts-main">
                        {% for segment_text in segment_texts %}
                        <div class="segment-text">
                           <h3>Segment {{ forloop.counter }}</h3>
                           <textarea id="w3review" name="w3review" rows="4" cols="50">{{ segment_text }}</textarea>
                        </div>
                        {% endfor %}
                     </div>
                     <div class="segment-video-main">
                        {% if segment_urls %}
                        <h3>Segmented Videos:</h3>
                        <div class="main-carousel" data-flickity='{ "wrapAround": false }'>
                           {% for segment_url in segment_urls %}
                           <div class="carousel-cell">
                              <video width="320" height="240" controls>
                                 <source src="{{ segment_url }}" type="video/mp4">
                                 Your browser does not support the video tag.
                              </video>
                              <input type="file" id="mediaUpload" accept="video/*,image/*"> <!-- Add the file upload input field -->
                              <div class="uploaded-media"></div>
                              <!-- Div to display the uploaded media -->
                              <p><a href="#" class="btn btn-secondary py-2 ml-1 delete-segment-btn" data-segment-index="{{ forloop.counter0 }}">Delete</a></p>
                           </div>
                           {% endfor %}
                        </div>
                        {% endif %}
                        <!-- {% if generated_text %}
                           <div class="after-generated-text-main">
                               <h3>Generated Text:</h3>
                               <p>{{ generated_text }}</p>
                           </div>
                           {% endif %} -->
                     </div>
                  </div>
               </div>
               {% endif %}
            </div>
         </div>
      </div>
   </div>
</div>

    {% endblock %}

    <div class="container-fluid text-white-50 footer pt-5">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.1s">
                    <a href="index.html" class="d-inline-block mb-3">
                        <h1 class="text-white">AI<span class="text-primary">.</span>Tech</h1>
                    </a>
                    <p class="mb-0">Tempor erat elitr rebum at clita. Diam dolor diam ipsum et tempor sit. Aliqu diam
                        amet diam et eos labore. Clita erat ipsum et lorem et sit, sed stet no labore lorem sit. Sanctus
                        clita duo justo et tempor</p>
                </div>
                <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.3s">
                    <h5 class="text-white mb-4">Get In Touch</h5>
                    <p><i class="fa fa-map-marker-alt me-3"></i>123 Street, New York, USA</p>
                    <p><i class="fa fa-phone-alt me-3"></i>+012 345 67890</p>
                    <p><i class="fa fa-envelope me-3"></i>info@example.com</p>
                    <div class="d-flex pt-2">
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-youtube"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-instagram"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.5s">
                    <h5 class="text-white mb-4">Popular Link</h5>
                    <a class="btn btn-link" href="">About Us</a>
                    <a class="btn btn-link" href="">Contact Us</a>
                    <a class="btn btn-link" href="">Privacy Policy</a>
                    <a class="btn btn-link" href="">Terms & Condition</a>
                    <a class="btn btn-link" href="">Career</a>
                </div>
                <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.7s">
                    <h5 class="text-white mb-4">Our Services</h5>
                    <a class="btn btn-link" href="">Robotic Automation</a>
                    <a class="btn btn-link" href="">Machine learning</a>
                    <a class="btn btn-link" href="">Predictive Analysis</a>
                    <a class="btn btn-link" href="">Data Science</a>
                    <a class="btn btn-link" href="">Robot Technology</a>
                </div>
            </div>
        </div>
        <div class="container wow fadeIn" data-wow-delay="0.1s">
            <div class="copyright">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0 text-dark">
                        &copy; <a class="border-bottom text-dark" href="#">AI Video</a> 2024, All Right Reserved.
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <div class="footer-menu">
                            <a href="">Home</a>
                            <a href="">Cookies</a>
                            <a href="">Help</a>
                            <a href="">FAQs</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top pt-2"><i class="bi bi-arrow-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flickity@3.0.0/dist/flickity.pkgd.min.js" integrity="sha256-K8XfylopijCrS7K3AJlF3A1fUNnM8a9m0co7Vl6Qkkw=" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'lib/wow/wow.min.js' %}"></script>
    <script src="{% static 'lib/easing/easing.min.js' %}"></script>
    <script src="{% static 'lib/waypoints/waypoints.min.js' %}"></script>
    <script src="{% static 'lib/counterup/counterup.min.js' %}"></script>
    <script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>
    <!-- Template Javascript -->
    <script src="{% static 'js/main.js' %}"></script>
    <script type="text/javascript">
   // Function to display the loader and text
   function showLoader() {
       document.getElementById("loader").style.display = "block";
       document.getElementById("loader-text").style.display = "block";
       updateLoaderText();
   }
   // Function to hide the loader and text
   function hideLoader() {
       document.getElementById("loader").style.display = "none";
       document.getElementById("loader-text").style.display = "none";
   }
   let getGetDemo = document.querySelector(".btn-to-mrg-vid");
   getGetDemo.addEventListener("click", () => {
       showLoader();
   });
   function updateLoaderText() {
       let loaderText = document.getElementById("loader-text");
       let texts = [
           "Generating text",
           "Generating audio",
           "Fetching video",
           "Merging video",
           "Merging video and audio",
           "Output will be ready soon"
       ];
       let index = 0;
       function setText() {
           loaderText.innerHTML = texts[index];
           index = (index + 1) % texts.length;
           setTimeout(setText, 10000); // Update text every 5 seconds
       }
       setText();
   }
   $(document).ready(function () {
       $(".btn-to-mrg-vid").click(function () {
         let video = document.getElementById("background-myVideo");
            video.autoplay = true;
            video.load();
           $(".input-txt-to-create-vid").hide();
           $(".maxima-sub-head").hide();
           $(".try-this").hide();
           $(".background-video").show();
           $("#progressBar").show();
           updateProgressBar();
       });
   });
   function updateProgressBar() {
       let progressBar = document.getElementById('progress');
       let progressText = document.getElementById('progressText');
       let width = 0;
       let interval = setInterval(() => {
           if (width >= 99) { // Stop at 99%
               clearInterval(interval);
           } else {
               width += 1;
               progressBar.style.width = width + '%';
               progressText.innerText = width + '%';
           }
       }, 2500); // 5 seconds interval
       // Wait for the whole page to load
       window.onload = function () {
           // When the page is fully loaded, set the progress to 100%
           clearInterval(interval);
           progressBar.style.width = '100%';
           progressText.innerText = '100%';
           // Hide the progress bar after a brief delay (e.g., 1 second)
           setTimeout(function () {
               $("#progressBar").hide();
           }, 1000);
       };
   }
</script>
<script>
   document.getElementById('mediaUpload').addEventListener('change', function(event) {
       const file = event.target.files[0]; // Get the uploaded file
   
       if (file) {
           const reader = new FileReader();
   
           reader.onload = function(e) {
               const mediaDiv = document.querySelector('.uploaded-media');
               mediaDiv.innerHTML = ''; // Clear previous media
   
               if (file.type.includes('video')) {
                   // Display video if the uploaded file is a video
                   const videoElement = document.createElement('video');
                   videoElement.src = e.target.result;
                   videoElement.controls = true;
                   videoElement.width = 320;
                   videoElement.height = 240;
                   mediaDiv.appendChild(videoElement);
               } else if (file.type.includes('image')) {
                   // Display image if the uploaded file is an image
                   const imageElement = document.createElement('img');
                   imageElement.src = e.target.result;
                   imageElement.width = 320;
                   imageElement.height = 240;
                   mediaDiv.appendChild(imageElement);
               } else {
                   // Handle other file types (if necessary)
                   const errorMessage = document.createElement('p');
                   errorMessage.textContent = 'Uploaded file is not supported.';
                   mediaDiv.appendChild(errorMessage);
               }
           };
   
           reader.readAsDataURL(file); // Read the uploaded file as a data URL
       }
   });
</script>
<script>
   $(document).ready(function() {
       // Get the CSRF token from the cookie
       function getCookie(name) {
           let cookieValue = null;
           if (document.cookie && document.cookie !== '') {
               const cookies = document.cookie.split(';');
               for (let i = 0; i < cookies.length; i++) {
                   const cookie = cookies[i].trim();
                   // Search for the CSRF token cookie
                   if (cookie.startsWith('csrftoken=')) {
                       cookieValue = decodeURIComponent(cookie.substring('csrftoken='.length));
                       break;
                   }
               }
           }
           return cookieValue;
       }
   });
</script>
<script>
   // JavaScript to initialize Slick slider after the DOM is ready
   $(document).ready(function () {
       document.addEventListener('DOMContentLoaded', function () {
           var flkty = new Flickity('.main-carousel', {
               wrapAround: false,
               // Additional Flickity options can be added here
           });
       });
   });
</script>
<script>
   $(document).ready(function(){
       $('.segment-texts-main').hide();
       $('#segment-button-text').click(function(){
           $('.segment-texts-main').show();
           $('.segment-video-main').hide();
       });
       $('#segment-button-video').click(function(){
           $('.segment-texts-main').hide();
           $('.segment-video-main').show();
       });
   });
   $(document).ready(function () {
       $(".history-sidebar").click(function () {
           $(".sidebar-container").toggleClass("active");
       });
   });
</script>
<script>
   document.getElementById("editButton").addEventListener("click", function () {
       // Show the popup
       document.getElementById("editPopup").style.display = "block";
   });
   // Event listener for the "Close" button in the popup
   document.getElementById("closePopup").addEventListener("click", function () {
       // Close the popup
       document.getElementById("editPopup").style.display = "none";
   });
</script>
<script>
$(document).ready(function(){
    $('.navbar-toggler').click(function(){
        $('.collapse.navbar-collapse').toggle();
    });
});
</script>
<!-- Add this script in your base template or any template included in all pages -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
    function keepSessionAlive() {
        $.get('/keep-session-alive/');
    }

    // Call the function every 5 minutes (adjust as needed)
    setInterval(keepSessionAlive, 5 * 60 * 1000);
</script>

</body>

</html>